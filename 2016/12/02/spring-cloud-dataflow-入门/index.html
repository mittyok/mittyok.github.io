<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="皮亮"><title>spring cloud dataflow 入门 · 风中的少年</title><meta name="description" content="最初为什么选择Spring
make j2ee easier
loose-coupling through interfaces, dependency injection, aspect-oriented programming
sought to make the entire java eco"><meta name="keywords" content><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/style.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div id="stage" class="container"><div class="row"><div id="side-bar" class="col-sm-3 col-xs-12 side-container invisible"><div class="vertical-text site-title"><h3 tabindex="-1" class="site-title-small"><a href="/" class="a-title">MittyOK</a></h3><h1 tabindex="-1" class="site-title-large"><a href="/" class="a-title">风中少年</a></h1><!--h6(onclick="triggerSiteNav()") Trigger--></div><br class="visible-lg visible-md visible-sm"><div id="site-nav" class="site-title-links"><ul><li><a href="/">首页</a></li><li><a href="/archives">归档</a></li><li><a href="/categories">分类</a></li><li><a href="/tags">标签</a></li><li><a href="/tags/index.html">tags</a></li><li><a href="/categories/index.html">categories</a></li><li class="soc"><a href="http://yoursite.com/atom.xml" target="_blank" rel="noopener noreferrer"><i class="fa fa-rss">&nbsp;</i></a></li></ul><div class="visible-lg visible-md visible-sm site-nav-footer"><br class="site-nav-footer-br"><footer><p>&copy;&nbsp;2021&nbsp;<a target="_blank" href="http://yoursite.com" rel="noopener noreferrer">皮亮</a></p><p>Theme&nbsp;<a target="_blank" href="https://github.com/SumiMakito/hexo-theme-typography" rel="noopener noreferrer">Typography</a>&nbsp;by&nbsp;<a target="_blank" href="https://www.keep.moe" rel="noopener noreferrer">Makito</a></p><p>Proudly published with&nbsp;<a target="_blank" href="https://hexo.io" rel="noopener noreferrer">Hexo</a></p></footer></div></div></div><div id="main-container" class="col-sm-9 col-xs-12 main-container invisible"><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post-container"><p class="post-title"><a>spring cloud dataflow 入门</a></p><p class="post-meta"><span class="date meta-item">发布于&nbsp;2016-12-02</span><span class="meta-item"><i class="fa fa-tag"></i><span>&nbsp;</span><a href="/tags/spring-cloud/" title="spring cloud" class="a-tag">spring cloud</a><span>&nbsp;</span><a href="/tags/dataflow/" title="dataflow" class="a-tag">dataflow</a><span>&nbsp;</span><a href="/tags/task/" title="task" class="a-tag">task</a><span>&nbsp;</span><a href="/tags/batch/" title="batch" class="a-tag">batch</a><span>&nbsp;</span><a href="/tags/job/" title="job" class="a-tag">job</a><span>&nbsp;</span></span></p><p class="post-abstract"></p><h2 id="最初为什么选择Spring"><a href="#最初为什么选择Spring" class="headerlink" title="最初为什么选择Spring"></a>最初为什么选择Spring</h2><ul>
<li>make j2ee easier</li>
<li>loose-coupling through interfaces, dependency injection, aspect-oriented programming</li>
<li>sought to make the entire java ecosystem easier</li>
<li>security, various types of database, data integration, and now cloud-native microservices</li>
<li>spring is headed now with regard to reactive programming.</li>
</ul>
<h2 id="H2"><a href="#H2" class="headerlink" title="H2"></a>H2</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The development of H2 was started in May 2004, but it was first published on December 14th 2005. The main author of H2, Thomas Mueller, is also the original developer of Hypersonic SQL. In 2001, he joined PointBase Inc. where he wrote PointBase Micro, a commercial Java SQL database. At that point, he had to discontinue Hypersonic SQL. The HSQLDB Group was formed to continued to work on the Hypersonic SQL codebase. The name H2 stands for Hypersonic 2, however H2 does not share code with Hypersonic SQL or HSQLDB. H2 is built from scratch.</span><br></pre></td></tr></table></figure>
<h2 id="Spring-Cloud-Task"><a href="#Spring-Cloud-Task" class="headerlink" title="Spring Cloud Task"></a>Spring Cloud Task</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Spring Cloud Task allows a user to develop and run short lived microservices using Spring Cloud and run them locally, in the cloud, even on Spring Cloud Data Flow. Just add @EnableTask and run your app as a Spring Boot app (single application context).</span><br></pre></td></tr></table></figure>
<h2 id="Task-Demo"><a href="#Task-Demo" class="headerlink" title="Task Demo"></a>Task Demo</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootApplication</span><br><span class="line">@EnableTask</span><br><span class="line">public class SampleTask &#123;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    CommandLineRunner commandLineRunner() &#123;</span><br><span class="line">        return new HelloWorldCommandLineRunner();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(SampleTask.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private class HelloWorldCommandLineRunner implements CommandLineRunner &#123;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void run(String... strings) throws Exception &#123;</span><br><span class="line">            System.out.println(&quot;Hello World!&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Spring-Batch"><a href="#Spring-Batch" class="headerlink" title="Spring Batch"></a>Spring Batch</h2><p>在一些特定的情况下，我们会有这样的需求，我们需要批量的执行一些业务操作。这些业务操作一般都有这样的特点：</p>
<ol>
<li>涉及到的数据量较大</li>
<li>不需要人工干预</li>
<li>处理较为复杂</li>
<li>需要自动的处理</li>
</ol>
<p>典型的操作如：日结或者月结的一些计算，通知等类似的场景。。。</p>
<h3 id="典型的场景"><a href="#典型的场景" class="headerlink" title="典型的场景"></a>典型的场景</h3><ol>
<li>周期性的批量处理</li>
<li>并行作业</li>
<li>基于消息驱动的业务处理</li>
<li>失败后支持手动或者定时重启的场景</li>
<li>一些步骤需要按顺序执行的</li>
<li>作业需要支持事务的情况</li>
</ol>
<h2 id="Concept"><a href="#Concept" class="headerlink" title="Concept"></a>Concept</h2><p>1 Job = Many Steps<br>1 Step = 1 REAT-PROCESS-WRITE or 1 Tasklet</p>
<p>Job = {Step 1 -&gt; Step 2 -&gt; Step 3}</p>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><p>Example code.</p>
<h3 id="Main-Class"><a href="#Main-Class" class="headerlink" title="Main Class"></a>Main Class</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@EnableTask</span><br><span class="line">@EnableBatchProcessing</span><br><span class="line">@SpringBootApplication</span><br><span class="line">public class BatchJobApplication &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(BatchJobApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Job-Configuration"><a href="#Job-Configuration" class="headerlink" title="Job Configuration"></a>Job Configuration</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">public class JobConfiguration &#123;</span><br><span class="line"> </span><br><span class="line">    private static Log logger</span><br><span class="line">      = LogFactory.getLog(JobConfiguration.class);</span><br><span class="line"> </span><br><span class="line">    @Autowired</span><br><span class="line">    public JobBuilderFactory jobBuilderFactory;</span><br><span class="line"> </span><br><span class="line">    @Autowired</span><br><span class="line">    public StepBuilderFactory stepBuilderFactory;</span><br><span class="line"> </span><br><span class="line">    @Bean</span><br><span class="line">    public Job job() &#123;</span><br><span class="line">        return jobBuilderFactory.get(&quot;job&quot;)</span><br><span class="line">          .start(stepBuilderFactory.get(&quot;jobStep1&quot;)</span><br><span class="line">          .tasklet(new Tasklet() &#123;</span><br><span class="line">             </span><br><span class="line">              @Override</span><br><span class="line">              public RepeatStatus execute(StepContribution contribution, </span><br><span class="line">                ChunkContext chunkContext) throws Exception &#123;</span><br><span class="line">                 </span><br><span class="line">                logger.info(&quot;Job was run&quot;);</span><br><span class="line">                return RepeatStatus.FINISHED;</span><br><span class="line">              &#125;</span><br><span class="line">        &#125;).build()).build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Chunk-Oriented-Processing"><a href="#Chunk-Oriented-Processing" class="headerlink" title="Chunk-Oriented Processing"></a>Chunk-Oriented Processing</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Chunk oriented processing refers to reading the data one at a time, and creating &apos;chunks&apos; that will be written out, within a transaction boundary.</span><br></pre></td></tr></table></figure>
<h2 id="Spring-Cloud-Dataflow"><a href="#Spring-Cloud-Dataflow" class="headerlink" title="Spring Cloud Dataflow"></a>Spring Cloud Dataflow</h2><h3 id="Tap"><a href="#Tap" class="headerlink" title="Tap"></a>Tap</h3><p></p></div><div class="share"><span>分享到</span>&nbsp;<span class="soc"><a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></span><span class="soc"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></span><span class="soc"><a href="http://twitter.com/home?status=http://yoursite.com/2016/12/02/spring-cloud-dataflow-入门/%20风中的少年%20spring cloud dataflow 入门" class="fa fa-twitter"></a></span></div><div class="pagination"><p class="clearfix"><span class="pre pagbuttons"><a role="navigation" href="/2016/12/02/Axon_Framework_介绍/" title="Axon Framework 介绍"><i class="fa fa-angle-double-left"></i>&nbsp;上一篇: Axon Framework 介绍</a></span><span>&nbsp;</span><span class="next pagbuttons"><a role="navigation" href="/2016/11/24/耳机煲机技巧/" title="耳机煲机技巧">下一篇: 耳机煲机技巧&nbsp;<i class="fa fa-angle-double-right"></i></a></span></p></div></div></div></div><div class="visible-xs site-bottom-footer"><footer><p>&copy;&nbsp;2021&nbsp;<a target="_blank" href="http://yoursite.com" rel="noopener noreferrer">皮亮</a></p><p>Theme&nbsp;<a target="_blank" href="https://github.com/SumiMakito/hexo-theme-typography" rel="noopener noreferrer">Typography</a>&nbsp;by&nbsp;<a target="_blank" href="https://www.keep.moe" rel="noopener noreferrer">Makito</a></p><p>Proudly published with&nbsp;<a target="_blank" href="https://hexo.io" rel="noopener noreferrer">Hexo</a></p></footer></div></div></div></div><script src="/js/jquery-3.1.0.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/google-analytics.js"></script><script src="/js/typography.js"></script></body></html>